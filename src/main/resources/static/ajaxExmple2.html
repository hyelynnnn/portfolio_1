<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
    <button id="sendBtn">JSON 수신</button>
    <div id="message"></div>

<script>
    let button = document.querySelector("#sendBtn");
    button.addEventListener("click", event =>{
        ajaxRequest();
    });

    function ajaxRequest(){
        let request = new XMLHttpRequest();
        request.open("get", "/json");
        request.addEventListener("readystatechange", event => {
            if(request.readyState === 4){
                if(request.status === 200){
                    showMessage(request.responseText);
                }else if(request.status === 400){
                    showMessage("잘못된 요청입니다..");
                }else if(request.status === 404){
                    showMessage("페이지를 찾을 수 없습니다...");
                }
            }else{
                console.log("데이터 수신중.....");
            }
        });
        request.send();
    }

    function showMessage(message){
        const div = document.querySelector("#message");
        //div.innerHTML = message;
        let member = JSON.parse(message);
        div.innerHTML = `아이디: ${member.id}, 이름: ${member.name}`;
        // 동적 CSS 적용
        div.style.width = '200px';
        div.style.backgroundColor = 'yellow';
        div.style.color = '#ff0000';
        div.style.border = '2px dotted red';
    }
</script>
</body>
</html>