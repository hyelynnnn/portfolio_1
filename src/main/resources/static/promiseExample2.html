<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
   <h2>Promise(비동기 처리 작업 약속) 객체 사용하기</h2>
<script>
    function requestOrder1(){
        return new Promise((resolve, reject) => {
            setTimeout(() => {
                resolve("1번 주문 완료");
            }, 1000)
        });
    }

    function requestOrder2(message){
        console.log(message);
        return new Promise((resolve, reject) => {
            setTimeout(() => {
                resolve("2번 주문 완료");
                // reject("2번 주문 시 오류 발생");
            }, 3000)
        });
    }

    function requestOrder3(message){
        console.log(message);
        return new Promise((resolve, reject) => {
            setTimeout(() => {
                resolve("3번 주문 완료");
            }, 2000)
        });
    }

    // promise 객체의 then() 메소드 체이닝을 이용하여 연속적인 비동기 처리
    async function order(){
        // requestOrder1()
        //     .then((result) => {
        //         return requestOrder2(result);
        //     })
        //     .then((result) => {
        //         return requestOrder3(result);
        //     })
        //     .then((result) => {
        //         console.log(result);
        //     })
        //     .catch((error) => {
        //         console.log(error);
        //     });

        const result = await requestOrder1();
        const result2 = await requestOrder2(result);
        const result3 = await requestOrder3(result2);
        console.log(result3)

    }

    console.log("프로그램 시작됨...");
    order();
    console.log("프로그램 종료됨...")
</script>
</body>
</html>