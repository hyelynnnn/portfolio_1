<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
    <button id="sendBtn">JSON 수신</button>
    <div id="message"></div>

<script>
    let button = document.querySelector("#sendBtn");
    button.addEventListener("click", event => {
        let item = {
            productId : "bangry",
            name : "삼송TV",
            price : 1000
        };

        let option = {
            method :"post",
            headers : {
                "Content-Type" : "application/x-www-form-urlencoded"
            },
            body : JSON.stringify(item)
        };

        fetch("/json5555", option)
            .then(response => {
                if(!response.ok){
                    throw new Error(`${response.status} 에러가 발생하였습니다.`);
                }
                return response.json();
            })
            .then(object => showMessage(object))
            .catch(error => showErrorMessage(error));
    });

    function showMessage(member){
        const div = document.querySelector("#message");
        div.innerHTML = `아이디: ${member.id}, 이름: ${member.name}`;
        // 동적 CSS 적용
        div.style.width = '200px';
        div.style.backgroundColor = 'yellow';
        div.style.color = '#ff0000';
        div.style.border = '2px dotted red';
    }

    function showErrorMessage(error){
        const div = document.querySelector("#message");
        div.innerHTML = error;
        // 동적 CSS 적용
        div.style.width = '200px';
        div.style.backgroundColor = 'yellow';
        div.style.color = '#ff0000';
        div.style.border = '2px dotted red';
    }
</script>
</body>
</html>